- job:
    name: continues-deployment
    display-name: Continues Deployment
    project-type: flow
    description: |
      Apply submitted patches and start POC deployment.
    concurrent: true
    scm:
      - logstash-input-bugzilla
      - logstash-input-bugzilla-ci
    triggers:
      - gerrit:
          trigger-on:
            - change-merged-event
            - change-restored-event
          projects:
              - project-compare-type: 'PLAIN'
                project-pattern: 'abraverm/logstash-input-bugzilla'
                branches:
                  - branch-compare-type: 'PLAIN'
                    branch-pattern: 'master'
    node: docker
    parameters:
       - string:
          name: GERRIT_REFSPEC
          default: refs/heads/master
       - string:
          name: GERRIT_BRANCH
          default: origin/master
    builders:
      - shell:
          !include-raw scripts/deploy.sh
